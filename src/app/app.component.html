<div
  class="d-flex flex-column flex-md-row align-items-center justify-content-between p-3 px-md-4 mb-3 bg-white border-bottom shadow-sm"
>
  <div class="px-3 justify-content-center border-line">
    <a href="https://ntlink.com.mx" target="_blank"><img src="assets/ntlink_world.png" class="logo-nt" /></a>
  </div>
  <h2>NTLINK CFDI 4.0 TIMBRADO PLAYGROUND</h2>
  <nav class=" navbar my-2 my-md-0 mr-md-3">
    <a class="nav-link p-2 text-dark"target="_blank"  href="https://github.com/NTlink/ntlink-ws-cfdi-documentation/wiki">Documentación</a>
    <a class="nav-link p-2 text-dark"target="_blank"  href="https://www.ntlink.com.mx/web-service">Cfdi 4.0</a>
    <a class="nav-link p-2 text-dark" target="_blank" href="https://ntlink.com.mx/precios">Precios</a>
    <a class="nav-link p-2 text-dark"target="_blank"  href="https://ntlinkcfdi.com/blog-ntlink">Blog</a>
    <a class="nav-link p-2 text-dark"target="_blank"  href="https://ntlink.com.mx/contacto">Contacto</a>
  </nav>
</div>

<div class="container mt-5">
  <div class="row ">
    <div class="col-md-6 ">

      <h3>Seleccione un usuario</h3>
      <div class="form-check" *ngFor="let user of users; let i = index">
        <input class="form-check-input" type="radio" name="userSelection" (change)="selectUser(i)" [checked]="selectedUser === user" [disabled]="isCustom">
        <label class="form-check-label">
          Usuario WS: {{ user.wsUser }}<br>
          Contraseña WS: {{ user.wsPassword }}
        </label>
      </div>
      <div class="form-check mt-3">
        <input class="form-check-input" type="checkbox" (change)="toggleCustom()" [checked]="isCustom">
        <label class="form-check-label">Usar datos personalizados</label>
      </div>

      <div *ngIf="isCustom" class="mt-3">
        <div class="mb-2">
          <label class="form-label">Usuario WS</label>
          <input type="text" class="form-control" [(ngModel)]="customUser.wsUser">
        </div>
        <div class="mb-2">
          <label class="form-label">Contraseña WS</label>
          <input type="password" class="form-control" [(ngModel)]="customUser.wsPassword">
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <label for="formFile" class="form-label">Selecciona archivo XML</label>
      <input #fileInput class="form-control" type="file" id="formFile" accept=".xml" (change)="onFileChange($event)" />
      <div class="d-grid gap-2 mt-4">
        <button type="button" [disabled]="loading" class="btn btn-light"(click)="stampXML()">
          <span *ngIf="loading" class="spinner-border spinner-border-sm"></span>
          Timbrar</button>
      </div>
    </div>

  </div>
  <div class="row d-flex mt-5">

    <div class="col-md-12">
    <div class="p-4 p-md-5 mb-4 rounded text-body-emphasis bg-body-secondary">
      <p class="small fst-normal text-wrap">{{ result || '' }}</p>

    </div>
    </div>
  </div>
  <div class="row overflow-x-auto">
    <xml-viewer-component [xml]="xml"></xml-viewer-component>
  </div>


</div>
<footer class="pt-4 my-md-5 pt-md-5 border-top ">
  <div class="nt-green py-4">
    <div class="row px-3"><small class="ml-4 ml-sm-5 mb-2">NT LINK &copy; 2025</small></div>
  </div>
</footer>
